(()=>{var t={296:t=>{function e(t,e,n){var o,i,s,d,l;function r(){var c=Date.now()-d;c<e&&c>=0?o=setTimeout(r,e-c):(o=null,n||(l=t.apply(s,i),s=i=null))}null==e&&(e=100);var c=function(){s=this,i=arguments,d=Date.now();var c=n&&!o;return o||(o=setTimeout(r,e)),c&&(l=t.apply(s,i),s=i=null),l};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(l=t.apply(s,i),s=i=null,clearTimeout(o),o=null)},c}e.debounce=e,t.exports=e},445:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrow=void 0,e.arrow=function(t,e,n,o,i,s){let d=o-e,l=i-n,r=Math.sqrt(d*d+l*l),c=l/r,a=d/r,h=[];h.push(0,0);for(let t=0;t<s.length;t+=2){let e=s[t],n=s[t+1];h.push(e<0?r+e:e,n)}h.push(r,0);for(let t=s.length;t>0;t-=2){let e=s[t-2],n=s[t-1];h.push(e<0?r+e:e,-n)}h.push(0,0);for(let o=0;o<h.length;o+=2){let i=h[o]*a-h[o+1]*c+e,s=h[o]*c+h[o+1]*a+n;0===o?t.moveTo(i,s):t.lineTo(i,s)}}},325:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawEmptyChessboard=e.drawChessboard=void 0;const o=n(445),i=document.getElementById("canvasChessboard");function s(){const t=i.clientWidth/5;!function(t){const e=t.clientWidth,n=t.clientHeight;if(t.width!==e||t.height!==n)t.width=e,t.height=2*n}(i);const e=i.getContext("2d");for(let n=0;n<5;n++)for(let o=0;o<5;o++){e.fillStyle=(n+o)%2==0?"white":"black";const i=o*t,s=n*t;e.fillRect(i,s,t,t)}return e.fillStyle="cyan",e.fillRect(2*t,0*t,t,t),e}function d(t,e,n,i,s,d){t.beginPath(),o.arrow(t,(n+.5)*e,(i+.5)*e,(s+.5)*e,(d+.5)*e,[0,5,-20,5,-20,15]),t.fill(),t.beginPath(),o.arrow(t,(n+.5)*e,(i+.5)*e,(s+.5)*e,(d+.5)*e,[0,5,-20,5,-20,15]),t.stroke()}e.drawEmptyChessboard=s,e.drawChessboard=function(t,e,n,o){t=4-t,e=4-e,n=4-n,o=4-o;const l=s(),r=i.clientWidth/5;let c=document.getElementById("imagesource");const a=t*r+5,h=e*r+5;l.drawImage(c,a,h,r-10,r-10),l.fillStyle="black",l.strokeStyle="white",l.lineWidth=3,d(l,r,t,e,n,o),d(l,r,n,o,2,0)}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,n),s.exports}(()=>{"use strict";const t=n(325),e=n(296),o=[2,3,4],i=[[0,1],[0,-1],[1,0],[-1,0]];class s{constructor(t,e){this.x=t,this.y=e}cartesianDistance(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}validPointsWithinN(t){const e=[],n=[this],o=new Set;for(o.add(this.hash());;){const d=n.shift();if(void 0===d||d.cartesianDistance(this)>t)break;if(d.cartesianDistance(this)!==t)for(const t of i){const e=new s(d.x+t[0],d.y+t[1]);if(!e.isValid())continue;const i=e.hash();o.has(i)||(n.push(e),o.add(i))}else e.push(d)}return e}hash(){return 10*this.x+this.y}isValid(){return this.x>=0&&this.x<=4&&this.y>=0&&this.y<=4}}const d=new s(2,4),l=[new Map([[5,[new s(1,0),new s(3,0)]],[6,[new s(0,0),new s(4,0)]],[7,[new s(1,0),new s(3,0)]]]),new Map([[5,[new s(0,1),new s(4,1)]],[6,[new s(1,1),new s(3,1)]],[7,[new s(2,1)]]])],r=new Map;!function(){for(const t of o){const e=new Set;for(const n of d.validPointsWithinN(t))e.add(n.hash());r.set(t,e)}}(),t.drawEmptyChessboard();const c=document.getElementById("ok"),a=document.getElementById("ng"),h=document.getElementById("wall-btn"),u=document.getElementById("away-wall-btn"),f=document.getElementById("debuff1-2"),m=document.getElementById("debuff1-3"),y=document.getElementById("debuff1-4"),g=document.getElementById("debuff2-2"),w=document.getElementById("debuff2-3"),p=document.getElementById("debuff2-4"),b=document.getElementById("left-1"),E=document.getElementById("left-2"),v=document.getElementById("left-3"),x=document.getElementById("right-1"),I=document.getElementById("right-2"),B=document.getElementById("right-3");function C(e,n,o,i){try{const[s,d]=function(t,e,n){if(t<0||e.length<2||e[0]<0||e[1]<0||n.length<2||n[0]<0||n[0]>4||n[1]<0||n[1]>4)throw"not ready";const o=e[0]+e[1],i=r.get(e[1]);if(void 0===i)throw"missing endgame";const s=l[t].get(o);if(void 0===s)throw"missing opener";for(const t of s){const o=t.validPointsWithinN(e[0]),s=[];for(const t of o)t.x!==n[0]&&t.x!==n[1]&&s.push(t);const d=[];for(const t of s)i.has(t.hash())&&d.push(t);if(d.length>0)return[t,d]}throw"solution not found"}(e,n,[1+o,3-i]),h=d[0];t.drawChessboard(s.x,s.y,h.x,h.y),console.log("start: (%d,%d), second: (%d,%d)",s.x,s.y,h.x,h.y),c.hidden=!1,a.hidden=!0}catch(t){console.log("path not generated:",t),c.hidden=!0,a.hidden=!1}}c.hidden=!0,a.hidden=!1;let M=-1,k=[-1,-1],P=-99,W=-99;function S(t,e){t.addEventListener("click",(function(t){e(),C(M,k,P,W)}))}S(h,(()=>{M=0})),S(u,(()=>{M=1})),S(f,(()=>{k[0]=2})),S(m,(()=>{k[0]=3})),S(y,(()=>{k[0]=4})),S(g,(()=>{k[1]=2})),S(w,(()=>{k[1]=3})),S(p,(()=>{k[1]=4})),S(b,(()=>{W=1})),S(E,(()=>{W=2})),S(v,(()=>{W=3})),S(x,(()=>{P=1})),S(I,(()=>{P=2})),S(B,(()=>{P=3})),window.onresize=e.debounce((()=>{C(M,k,P,W)}),300,!1)})()})();